<!doctype html>

<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Saisyam&#39;s personal blog for technical articles" />
  <meta name="author" content="Saisyam" />
  <meta property="og:title" content="Reading and Writing WAV files with compression in Python using Pywav" />
<meta property="og:description" content="Testing voice applications involve handling RTP streams. Most of the IVR applications use PCMA/PCMU codecs to stream voice over RTP. PyWav is a Python library which helps you to convert those RAW streams with PCMU/PCMA encodings into a WAV file." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://saisyam.com/reading-and-writing-wav-files-with-compression-in-python-using-pywav/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-20T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-12-20T00:00:00+00:00" />

 
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Reading and Writing WAV files with compression in Python using Pywav"/>
<meta name="twitter:description" content="Testing voice applications involve handling RTP streams. Most of the IVR applications use PCMA/PCMU codecs to stream voice over RTP. PyWav is a Python library which helps you to convert those RAW streams with PCMU/PCMA encodings into a WAV file."/>

  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-50423294-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  <link rel="stylesheet" href="https://saisyam.com/css/app.min.css" />
  <style>
    #toc::before {
        content: "Table of Contents";
        font-weight: bold;
    }
    #toc nav {
      border-bottom: none;
      padding-bottom: 0.2em;
      font-family: "Ruda", sans-serif;
    }

    ol li, ul li {
      margin-bottom: 0em;
    }

    #toc nav ul {
       
      padding: 1em;
      list-style: decimal;
      display: inline-block;
    }
    ul.pagination {
      display: flex;
      justify-content: center;
      margin: 1em 0 0;
      padding: 0.5em 0;
      list-style: none;
    }
  
    ul.pagination li {
      padding: 0 1em;
    }
    .gist .blob-code-inner{ font-size:13px !important; }
    .gist .blob-num{ font-size:13px !important; }

    .highlight pre code{
      color: #fff;
      text-shadow: none;
    }
  </style>
  <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
  <link rel="manifest" href="favicon/site.webmanifest">
  <link rel="mask-icon" href="favicon/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
</head>


    <body class="post-template">
 
    <header class="header">
  <div class="header-top">
    <a href="https://saisyam.com">
      <h1 class="header-top__title">
        <img class="lazyload header-top__logo initial loaded" src="https://saisyam.com/saisyam.png" data-src="saisyam.png"
          alt="Saisyam's Personal Website" data-was-processed="true">
      </h1>
    </a>
  </div>

  <div class="header-main">
    <div class="container wrapper">
      <div class="grid">
        <label for="menu--toggle" class="header-main__menu--toggle col-xs left">
          <i class="icon icon-menu icon--large">
            <svg class="icon__svg">
              <use xlink:href="#icon-menu">
                <symbol id="icon-menu" viewBox="0 0 24 24">
                  <line x1="3" y1="12" x2="21" y2="12"></line>
                  <line x1="3" y1="6" x2="21" y2="6"></line>
                  <line x1="3" y1="18" x2="21" y2="18"></line>
                </symbol>
              </use>
            </svg>
          </i>
        </label>
        <input type="checkbox" id="menu--toggle" title="Menu" class="is-hidden">

        <nav class="header-main__menu nav col-sm top">
          <ul>
            <li>
              <a href="https://saisyam.com">Home</a>
            </li>
            <li>
              <a href="https://github.com/saisyam" target="_blank">Github</a>
            </li>
            <li>
              <a href="https://linkedin.com/in/saisyam" target="_blank">LinkedIn</a>
            </li>
            <li>
              <a href="https://instagram.com/saisyamdampuri" target="_blank">Instagram</a>
            </li>
          </ul>

        </nav>
      </div>
    </div>
  </div>
</header>
    <main class="main">
        
<div class="post">
  <div class="container wrapper">
    <div class="post-header">
      <h1 class="post-header__title">Reading and Writing WAV files with compression in Python using Pywav</h1>
      <div class="post-header__info">
        <div class="post-header__author">
          <a href="#">Saisyam</a>
        </div>
        <time class="post-header__date" datetime=" 2020-12-20">2020-12-20</time>
        <div class="post-header__read-time">2 min read</div>
      </div>
    </div>
  </div>
  <div id="content" class="container wrapper">
    <div class="grid">
      <article class="col-xs-12 col-md-8">
        <div class="post-content">
          
          <div class="post-content__inner">
            <p>Testing voice applications involve handling RTP streams. Most of the IVR applications use PCMA/PCMU codecs to stream voice over RTP. <a href="https://pypi.org/project/pywav/">PyWav</a> is a Python library which helps you to convert those RAW streams with PCMU/PCMA encodings into a WAV file. The library is similar to <a href="https://pypi.org/project/PyWave/">PyWave</a>, but the limitation with PyWave is, it will not support compression.</p>
<div id="toc">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#what-is-pywav">What is PyWav?</a></li>
    <li><a href="#reading-a-wav-file">Reading a WAV file</a></li>
    <li><a href="#writing-a-wav-file">Writing a WAV file</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav>
</div>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-0206245742790279"
     data-ad-slot="3890452391"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2 id="what-is-pywav">What is PyWav?</h2>
<p>When building a SIP test tool, I have to convert RTP audio streams with PCMA/PCMU encodings to WAV files for validation. PyWav is the result of that activity. Using PyWav you can write RAW streams into a playable WAV file supporting PCM/PCMA/PCMU compressions. Similarly, you can even read a WAV and get the RAW data from that WAV file to send it over RTP stream.</p>
<h2 id="reading-a-wav-file">Reading a WAV file</h2>
<p>Below sample code shows how to read a WAV file:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">wave_read <span style="color:#f92672">=</span> pywav<span style="color:#f92672">.</span>WavRead(<span style="color:#e6db74">&#34;&lt;filename to read&gt;&#34;</span>)
<span style="color:#75715e"># print parameters like number of channels, sample rate, bits per sample, audio format etc</span>
<span style="color:#75715e"># Audio format 1 = PCM (without compression)</span>
<span style="color:#75715e"># Audio format 6 = PCMA (with A-law compression)</span>
<span style="color:#75715e"># Audio format 7 = PCMU (with mu-law compression)</span>
print(wave_read<span style="color:#f92672">.</span>getparams())
</code></pre></div><p>Following are the list of parameters that are extracted from the WAV file:</p>
<ul>
<li>Number of channels</li>
<li>Sample rate</li>
<li>Byte rate</li>
<li>Bytes per sample</li>
<li>Bits per sample</li>
<li>Sample length</li>
<li>Data (raw data)</li>
<li>Audio format</li>
<li>Extra params</li>
</ul>
<p>To know more about WAV files and formats refer <a href="http://www-mmsp.ece.mcgill.ca/Documents/AudioFormats/WAVE/WAVE.html">this article</a>.</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-0206245742790279"
     data-ad-slot="3890452391"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2 id="writing-a-wav-file">Writing a WAV file</h2>
<p>You can write the RAW data captured from the RTP stream into a WAV file using the following sample:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># first parameter is the file name to write the wave data</span>
<span style="color:#75715e"># second parameter is the number of channels, the value can be 1 (mono) or 2 (stereo)</span>
<span style="color:#75715e"># third parameter is the sample rate, 8000 samples per second</span>
<span style="color:#75715e"># fourth paramaer is the bits per sample, 8 bits per sample</span>
<span style="color:#75715e"># fifth parameter is the audio format, 1 means PCM with no compression.</span>
wave_write <span style="color:#f92672">=</span> pywav<span style="color:#f92672">.</span>WavWrite(<span style="color:#e6db74">&#34;&lt;filename to write&gt;&#34;</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">8000</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">1</span>)
<span style="color:#75715e"># raw_data is the byte array. Write can be done only once for now.</span>
<span style="color:#75715e"># Incremental write will be implemented later</span>
wave_write<span style="color:#f92672">.</span>write(<span style="color:#f92672">&lt;</span>raw data<span style="color:#f92672">&gt;</span>)
<span style="color:#75715e"># close the file stream and save the file</span>
wave_write<span style="color:#f92672">.</span>close()
</code></pre></div><h2 id="conclusion">Conclusion</h2>
<p>You can install this as a <code>pip</code> package using <code>pip3 install pywav</code>. The source code of this project is available on <a href="https://github.com/saisyam/pywav">Github</a>.</p>

          </div>
        </div>
      </article>
      <aside class="col-xs-12 col-md-4">

        <div class="sidebar">

          <div class="sidebar__section">  
            <h5 class="sidebar__title">Sponsors</h5>
            <script async
              src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0206245742790279"
              crossorigin="anonymous"></script>
            
            <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-0206245742790279"
              data-ad-slot="3209664571" data-ad-format="auto" data-full-width-responsive="true"></ins>
            <script>
              (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
          </div>
        </div>
      </aside>
    </div>
  </div>
</div>
<script type="application/ld+json">
    
    {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "headline": "Reading and Writing WAV files with compression in Python using Pywav",
      "image": "https://saisyam.com/",
      "datePublished": "2020-12-20T00:00:00Z",
      "dateModified": "2020-12-20T00:00:00Z",
      "author": {
        "@type": "Person",
        "name":  null 
      },
      "mainEntityOfPage": { "@type": "WebPage" },
       "publisher": {
        "@type": "Organization",
        "name":  null ,
        "logo": {
          "@type": "ImageObject",
          "url":  null 
        }
      },
      "description": "Testing voice applications involve handling RTP streams. Most of the IVR applications use PCMA/PCMU codecs to stream voice over RTP. PyWav is a Python library which helps you to convert those RAW streams with PCMU/PCMA encodings into a WAV file.",
      "keywords": ["WAV compression", "PCMA", "PCMU"]
    }
    
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Personal blog",
      "url": "https://saisyam.com/",
      "sameAs": [
        "https://www.facebook.com/saisyam.dampuri.5667",
        "https://www.instagram.com/saisyamdampuri",
        "https://twitter.com/saisyam1",
        "https://github.com/saisyam"
      ]
    }
    </script>

    </main>
    <footer class="footer">
  <div class="container wrapper">
    <div class="footer__bottom">
      <div class="grid">
        <div class="col-lg center-lg">
          <li>© Saisyam - 2021</li>
        </div>
      </div>
    </div>
  </div>
</footer>




<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-50423294-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


</body>
</html>