<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <meta name="description" content="Our development involves databases and running PostgresQL inside Docker during the development phase saves lot of time for the developers.">
  
  <meta name="robots" content="index,follow" /> 
  <meta name="googlebot" content="index,follow" />
  <meta name="coverage" content="Worldwide" /> 
  <meta name="distribution" content="Global" /> 
  <meta name="HandheldFriendly" content="True" />
  <link rel="icon" href="images/favicon.ico" />
  <link rel="dns-prefetch" href="https://fonts.googleapis.com/">
  <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
  <link rel="manifest" href="images/site.webmanifest">

  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="It&#39;s easy to run PostgreSQL inside Docker"/>
<meta name="twitter:description" content="Our development involves databases and running PostgresQL inside Docker during the development phase saves lot of time for the developers."/>

  <meta property="og:title" content="It&#39;s easy to run PostgreSQL inside Docker" />
<meta property="og:description" content="Our development involves databases and running PostgresQL inside Docker during the development phase saves lot of time for the developers." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://saisyam.com/its-easy-to-run-postgresql-inside-docker/" />
<meta property="article:published_time" content="2020-03-30T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-03-30T00:00:00+00:00" />

  
  <title>It&#39;s easy to run PostgreSQL inside Docker</title>
  <base href="https://saisyam.com/" />
  <script type="application/ld+json">
  
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": "It's easy to run PostgreSQL inside Docker",
    "image": "https://saisyam.com/",
    "datePublished": "2020-03-30T00:00:00Z",
    "dateModified": "2020-03-30T00:00:00Z",
    "author": {
      "@type": "Person",
      "name": "Saisyam"
    },
    "mainEntityOfPage": { "@type": "WebPage" },
     "publisher": {
      "@type": "Organization",
      "name": "Saisyam - Personal Blog",
      "logo": {
        "@type": "ImageObject",
        "url": "images/profile.jpg"
      }
    },
    "description": "Our development involves databases and running PostgresQL inside Docker during the development phase saves lot of time for the developers.",
    "keywords": ["postgres", "docker"]
  }
  
  {
    "@context": "https://schema.org",
    "@type": "Website",
    "name": "Saisyam - Personal Blog",
    "url": "https://saisyam.com/",
    "sameAs": [
      "https://www.facebook.com/saisyam.dampuri.5667",
      "https://www.instagram.com/saisyamdampuri",
      "https://twitter.com/saisyam1",
      "https://github.com/saisyam",
      "https://linkedin.com/in/saisyam"
    ]
  }
  </script>

  <link rel="stylesheet" id="wc-block-style-css" href="css/style.css" type="text/css" media="all">
  <link rel="stylesheet" id="minit-minified-styles-css" href="css/minified-styles.css" type="text/css" media="all">
  <style id="fit-vids-style">
		.fluid-width-video-wrapper {
			width: 100%;
			position: relative;
			padding: 0;
		}

		.fluid-width-video-wrapper iframe,
		.fluid-width-video-wrapper object,
		.fluid-width-video-wrapper embed {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
		}
	</style>
	<style id="typology-full-fix" type="text/css">
		.alignfull {
			max-width: 1170px;
			width: 100vw;
			left: -295px;
		}
  </style>
  <style>
    .show{
          display:block !important;
      }
  </style>
  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-50423294-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

</head>
<body class="home page-template-default page page-id-35 wp-embed-responsive theme-typology woocommerce-js typology-v_1_6_3">

  <header id="typology-header" class="typology-header" style="z-index: 9001; top: 0px;">
    <div class="container">
        <div class="slot-l">
            <div class="typology-site-branding">

                <h1 class="site-title h4"><a href="https://saisyam.com/" rel="home">Saisyam</a></h1>
            </div>

        </div>

        <div class="slot-r">
            <ul id="menu-main-menu" class="typology-nav typology-main-navigation"
                style="opacity: 1; position: relative;">
                <li id="menu-item-321"
                    class="menu-item menu-item-type-custom current-menu-parent menu-item-object-custom menu-item-321">
                    <a href="https://saisyam.com/">Home</a>
                </li>
            </ul>
            <ul class="typology-nav typology-actions-list">
                <li id="action-button" class="typology-action-button typology-action-sidebar ">
                    <span>
                        <i class="fa fa-bars"></i>
                    </span>
                </li>
            </ul>
        </div>
    </div>
</header>

  <div id="typology-cover" class="typology-cover typology-cover-empty">
	</div>

	<div class="typology-fake-bg">
		<div class="typology-section">
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
    <ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-0206245742790279"
        data-ad-slot="4247058858"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
<div class="section-content">
    <article id="post-47"
        class="typology-post typology-single-post post-47 post type-post status-publish format-standard has-post-thumbnail hentry category-humans tag-noimages tag-typography tag-writing">
        <header class="entry-header">
            <h1 class="entry-title entry-title-cover-empty">It&#39;s easy to run PostgreSQL inside Docker</h1>
            <div class="entry-meta">
                <div class="meta-item meta-category">In 
                    
                    <a href="https://saisyam.com/categories/databases"
                        rel="category">Databases</a></div>
                    
                <div class="meta-item meta-date"><span class="updated">March 30, 2020</span></div>
                <div class="meta-item meta-comments"><a
                        href="https://demo.mekshq.com/typology/?p=47#comments">5 Comments</a></div>
            </div>
            <div class="post-letter">I</div>
        </header>
        <div class="entry-content clearfix">
            <p><a href="https://www.docker.com/">Docker</a> makes life easy to run most complex software without going through native installation process. I use docker to deliver development builds for the team to work in their local system. In this article we will see how to run <a href="https://www.postgresql.org/">PostgreSQL</a> inside Docker container, connect to the database docker and run SQL scripts.</p>
<h2 id="introduction-to-docker">Introduction to Docker</h2>
<blockquote>
<p>Docker is a set of platform as a service products that uses OS-level virtualization to deliver software in packages called containers. Containers are isolated from one another and bundle their own software, libraries and configuration files; they can communicate with each other through well-defined channels - Wikipedia</p>
</blockquote>
<p>To learn more about Docker there is an excellent tutorial by <a href="https://runnable.com/docker/">runnable</a>. You can find any docker image (a software bundled inside a docker container is called image) from <a href="https://hub.docker.com/search/?type=image">docker hub</a>. The most popular ones are RabbitMQ, Nginx, Apache etc.</p>
<h2 id="why-postgresql-inside-docker">Why PostgreSQL inside Docker</h2>
<p>Our projects are based on client-server and microservices architecture. We extensively use databases like, MySQL, PostgreSQL and MongoDB. We use messaging queues like RabbitMQ and Redis. So we encourage our developers to use dockers instead of installing all the software on their laptops.</p>
<p>In this article we will discuss on how to use PostgreSQL docker. We cover the following points:</p>
<ol>
<li>Running the PostgreSQL docker</li>
<li>Logging into the docker container</li>
<li>Logging into PostgreSQL with <code>psql</code> shell</li>
<li>Copying SQL files to docker and running them</li>
</ol>
<p><strong>Note:</strong> You need to have docker installed on your computer or laptop. For installing Docker community edition refer <a href="https://docs.docker.com/install/">here</a>.</p>





    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
        style="display:block; text-align:center;"
        data-ad-layout="in-article"
        data-ad-format="fluid"
        data-ad-client="ca-pub-0206245742790279"
        data-ad-slot="8377875555"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>





<h2 id="running-the-postgresql-docker">Running the PostgreSQL docker</h2>
<p>Use the following command to run PostgreSQL docker:</p>
<p><code>$ docker run --name postgres-docker -e POSTGRES_PASSWORD=postgres -p 5432:5432 -d postgres</code></p>
<ol>
<li>Pulls the latest Postgres Docker image from Docker Hub.</li>
<li>Sets the POSTGRES_PASSWORD environment variable value to <code>postgres</code>.</li>
<li>Names (&ndash;name) the Docker container to be <code>postgres-docker</code>.</li>
<li>Maps container&rsquo;s internal 5432 port to external 5432 port, so we will be able to enter it from outside.</li>
<li>Run the Docker container in the background (-d).</li>
</ol>
<p><strong>Note:</strong> In case you stopped your docker or restarted your computer or laptop you can restart your docker by its name. To get the list of containers available (both running and stopped) use the following command:</p>
<p><code>$ docker ps -a</code></p>
<p>To start your docker again use the following command:</p>
<p><code>$ docker start &lt;name of the docker&gt;</code></p>
<p>This is especially helpful when starting/stopping database dockers, as we store data (tables and records) in our docker containers.</p>





    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
        style="display:block; text-align:center;"
        data-ad-layout="in-article"
        data-ad-format="fluid"
        data-ad-client="ca-pub-0206245742790279"
        data-ad-slot="8377875555"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>





<h2 id="logging-into-the-docker-container">Logging into the docker container</h2>
<p>You can login into the docker container with <code>docker exec</code> command. Use below command to login as <code>root</code> into the running docker container:</p>
<p><code>$ docker exec -it &lt;name of the docker&gt; bash</code></p>
<p><code>$ root@377ef2b9b13e:/#</code></p>
<p>The name of the docker in our case is, <code>postgres-docker</code>. You will get to the prompt logged in as <code>root</code>.</p>
<h2 id="log-into-postgresql-inside-docker">Log into PostgreSQL inside Docker</h2>
<p>Once you are into the bash shell of the docker you can use <code>psql</code> command to manage your PostgreSQL database. You the following command to manage your database:</p>
<script type="application/javascript" src="https://gist.github.com/saisyam/6e9e54aed3380dc6c6e6fd54bb14b792.js"></script>

<p>We are using the default <code>postgres</code> user. You will get to the prompt to run commands like:</p>
<ol>
<li><code>\l</code> to list the available databases</li>
<li><code>\c &lt;database name&gt;</code> to select the database</li>
</ol>
<p>Run SQL commands like, <code>SELECT</code>, <code>INSERT</code>, <code>DELETE</code>, <code>UPDATE</code> etc. to manipulate your tables and records. Refer to <code>psql</code> documentation <a href="https://www.postgresql.org/docs/10/app-psql.html">here</a>.</p>
<h2 id="copying-sql-files-to-postgresql-inside-docker">Copying SQL files to PostgreSQL inside Docker</h2>
<p>Sometime we will have an existing schema (SQL file) which we need to execute once we have the docker up and running. To do that we need to copy our SQL file into the docker and then run the SQL file.</p>
<p>Copy the SQL file using <code>docker cp</code> command:</p>
<p><code>$ docker cp ./world.sql projectm-postgres:/docker-entrypoint-initdb.d/world.sql</code></p>
<p>Interpret the above command:</p>
<p><code>$ docker cp &lt;sql file&gt; &lt;docker name&gt;:/&lt;path in docker container&gt;/&lt;sql file&gt;</code></p>
<p>We will execute the SQL file using <code>docker exec</code> command:</p>
<p><code>$ docker exec -u postgres projectm-postgres psql world postgres -f docker-entrypoint-initdb.d/world.sql</code></p>
<p>Interpret the above command:</p>
<p><code>$ docker exec -u &lt;postgres user&gt; &lt;docker name&gt; psql &lt;dbname&gt; &lt;postgres user&gt; -f &lt;path to SQL file&gt;</code></p>
<p>The file I uses contains a <code>CREATE TABLE</code> and <code>INSERT TABLE</code> command. So the result says, <code>CREATE TABLE</code> successful and inserted 239 records. The SQL file I used can be downloaded from <a href="https://gist.github.com/saisyam/2859fcc386e7405d1416a67c6c8e859a">here</a></p>





    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
        style="display:block; text-align:center;"
        data-ad-layout="in-article"
        data-ad-format="fluid"
        data-ad-client="ca-pub-0206245742790279"
        data-ad-slot="8377875555"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>





<h2 id="conclusion">Conclusion</h2>
<p>Running databases within Docker provides a lot of flexibility by avoiding the complex installation procedure. Thanks for reading. I will come up with an another article using docker-compose.</p>

            <div class="entry-tags">
                
                <a href="https://saisyam.com/tags/postgres" rel="tag">Postgres</a>
                
                <a href="https://saisyam.com/tags/docker" rel="tag">Docker</a>
                
            </div>
        </div>

        <div class="meks_ess rectangle no-labels solid"><a href="javascript:void(0);"
                class="meks_ess-item socicon-facebook"
                data-url="http://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fsaisyam.com%2fits-easy-to-run-postgresql-inside-docker%2f"><span>Facebook</span></a><a
                href="javascript:void(0);" class="meks_ess-item socicon-twitter"
                data-url="http://twitter.com/intent/tweet?url=https%3a%2f%2fsaisyam.com%2fits-easy-to-run-postgresql-inside-docker%2f"><span>Twitter</span></a><a
                href="javascript:void(0);" class="meks_ess-item socicon-reddit"
                data-url="http://www.reddit.com/submit?url=https%3a%2f%2fsaisyam.com%2fits-easy-to-run-postgresql-inside-docker%2f"><span>Reddit</span></a>
        </div>
    </article>
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "saisyam-1" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

    </div>
    <footer id="typology-footer" class="typology-footer">

    <div class="container">

        <div class="col-lg-4 typology-footer-sidebar">
            <div id="text-2" class="widget clearfix widget_text">
                <div class="textwidget">
                    <div style="text-align: center">
                        <p><a href="https://saisyam.com/">Saisyam</a> · Powered by <a
                                href="https://gohugo.io/">Hugo</a> <br> All rights reserved</p>
                    </div>
                </div>
            </div>
        </div>

    </div>

</footer>
  </div>
  <div class="typology-sidebar">
    <div class="typology-sidebar-header">
        <div class="typology-sidebar-header-wrapper">
            <div class="typology-site-branding">

                <span class="site-title h4"><a href="https://saisyam.com/" rel="home">Saisyam</a></span>
            </div>
            <span class="typology-sidebar-close"><i class="fa fa-times" aria-hidden="true"></i></span>
        </div>
    </div>

    <div class="widget typology-responsive-menu" style="display: none;">
        <ul id="menu-main-menu-1" class="typology-nav typology-main-navigation">
            <li
                class="menu-item menu-item-type-custom menu-item-object-custom menu-item-321">
                <a href="https://saisyam.com/">Home</a>
            </li>
        </ul>
    </div>

    <div id="mks_author_widget-2" class="widget clearfix mks_author_widget">
        <h4 class="widget-title h5">I am Saisyam</h4>
        <img alt="" src="images/profile.jpg"
            class="avatar avatar-90 photo" height="90" width="90">

        <p>I am passionate software developer. I love exploring new technologies and programming languages. 
            Other than coding I love cooking, travelling and photography.</p>


    </div>
    <div id="mks_social_widget-2" class="widget clearfix mks_social_widget">
        <h4 class="widget-title h5">Get in touch</h4>
        <p>Talk to me about anything related to programming and technology. Happy to help.</p>

        <ul class="mks_social_widget_ul">
            <li><a href="https://facebook.com/saisyam.dampuri.5667" title="Facebook"
                    class="socicon-facebook soc_circle" target="_blank"
                    style="width: 46px; height: 46px; font-size: 16px;line-height:51px;"><span>facebook</span></a>
            </li>
            <li><a href="https://instagram.com/saisyamdampuri" title="Instagram"
                    class="socicon-instagram soc_circle" target="_blank"
                    style="width: 46px; height: 46px; font-size: 16px;line-height:51px;"><span>instagram</span></a>
            </li>
            <li><a href="https://twitter.com/saisyam1" title="Twitter"
                    class="socicon-twitter soc_circle" target="_blank"
                    style="width: 46px; height: 46px; font-size: 16px;line-height:51px;"><span>twitter</span></a>
            </li>
            <li><a href="https://github.com/saisyam" title="github"
                    class="socicon-github soc_circle" target="_blank"
                    style="width: 46px; height: 46px; font-size: 16px;line-height:51px;"><span>github</span></a>
            </li>
            <li><a href="https://linkedin.com/in/saisyam" title="linkedin"
                class="socicon-linkedin soc_circle" target="_blank"
                style="width: 46px; height: 46px; font-size: 16px;line-height:51px;"><span>linkedin</span></a>
        </li>
        </ul>
    </div>
</div>
<div class="typology-sidebar-overlay"></div>
  <script src="js/jquery.min.js"></script>
  <script>
    (function($) {
      var stickyHeaderTop = 0;
      $(window).scroll(function () {
          if ($(window).scrollTop() > stickyHeaderTop) {
              $("#typology-header").addClass('typology-header-sticky');
          } else {
              $("#typology-header").removeClass('typology-header-sticky');
          }       
      });
      $("#menu-main-menu-1 li .typology-nav-widget-acordion").click(function(){
        $(this).parent().toggleClass('active');
        $(this).siblings( ".sub-menu" ).toggleClass('show');
      })
      $("div.gistify").each(function(){
	      var url = $(this).attr("data-url");
	      $(this).load(url);
      });
      $('#action-button').on('click', function(){
        $('body').addClass('typology-sidebar-open typology-lock');
      });
      
      $('.typology-sidebar-close').on('click', function(){
        $('body').removeClass('typology-sidebar-open typology-lock');
      });
    })(jQuery);
  </script>  
</body>
</html>
