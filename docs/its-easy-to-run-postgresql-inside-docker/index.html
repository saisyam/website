<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="description" content="Saisyam's personal blog">
  <meta name="robots" content="index,follow" /> 
  <meta name="googlebot" content="index,follow" />
  <meta name="coverage" content="Worldwide" /> 
  <meta name="distribution" content="Global" /> 
  <meta name="HandheldFriendly" content="True" />
  <link rel="icon" href="images/favicon.ico" />
  <link rel="dns-prefetch" href="https://fonts.googleapis.com/">
  <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
  <link rel="manifest" href="images/site.webmanifest">
   
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="It&#39;s easy to run PostgreSQL inside Docker"/>
<meta name="twitter:description" content="Our development involves databases and running PostgresQL inside Docker during the development phase saves lot of time for the developers."/>

  <meta property="og:title" content="It&#39;s easy to run PostgreSQL inside Docker" />
<meta property="og:description" content="Our development involves databases and running PostgresQL inside Docker during the development phase saves lot of time for the developers." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://saisyam.com/its-easy-to-run-postgresql-inside-docker/" />
<meta property="article:published_time" content="2020-03-30T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-03-30T00:00:00+00:00" />

  
  <title>It&#39;s easy to run PostgreSQL inside Docker</title>
  <base href="https://saisyam.com/" />
  <script type="application/ld+json">
  
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": "It's easy to run PostgreSQL inside Docker",
    "image": "https://saisyam.com/",
    "datePublished": "2020-03-30T00:00:00Z",
    "dateModified": "2020-03-30T00:00:00Z",
    "author": {
      "@type": "Person",
      "name": "Saisyam"
    },
    "mainEntityOfPage": { "@type": "WebPage" },
     "publisher": {
      "@type": "Organization",
      "name": "Saisyam - Personal Blog",
      "logo": {
        "@type": "ImageObject",
        "url": "images/profile.jpg"
      }
    },
    "description": "Our development involves databases and running PostgresQL inside Docker during the development phase saves lot of time for the developers.",
    "keywords": ["postgres", "docker"]
  },
  
  {
    "@context": "https://schema.org",
    "@type": "Website",
    "name": "Saisyam - Personal Blog",
    "url": "https://saisyam.com/",
    "sameAs": [
      "https://www.facebook.com/saisyam.dampuri.5667",
      "https://www.instagram.com/saisyamdampuri",
      "https://twitter.com/saisyam1",
      "https://github.com/saisyam",
      "https://linkedin.com/in/saisyam"
    ]
  }
  </script>
  <link href="https://fonts.googleapis.com/css?family=PT+Serif:400,400i,700,700i&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/main.css" type="text/css" media="all">
</head>

<body>
  <header id="masthead" class="site-header">
    <div id="header-bg" class="site-header-bg" style="background-image:url('images/header-bg.jpg')"></div>
    <div class="site-header-scroll">
      <div class="site-header-inside">
        <div class="site-header-vertical">
            <p class="site-logo">
                <a href='https://saisyam.com/'><img src="images/logo.png"
                    alt="Site Logo" /></a>
            </p>
          <nav id="main-navigation" class="site-navigation" aria-label="Main Navigation">
    <div class="site-nav-wrap">
      <div class="site-nav-inside">
        <ul class="menu">
            <li id="home" class="menu-item">
              <a href="https://saisyam.com/">Home</a>
            </li>
            <li id="about" class="menu-item">
                <a href="https://saisyam.com/about">About Me</a>
            </li>
            <li id="work" class="menu-item">
                <a href="https://saisyam.com/work">My Work</a>
            </li>
        </ul>
        <div class="social-links">
          <a class="button-circle" href="https://twitter.com/saisyam1" target="_blank" rel="noopener">
            <span class="fab fa-twitter" aria-hidden="true"></span>
            <span class="screen-reader-text">Twitter</span>
          </a>
          <a class="button-circle" href="https://facebook.com/saisyam.dampuri.5667" target="_blank" rel="noopener">
            <span class="fab fa-facebook" aria-hidden="true"></span>
            <span class="screen-reader-text">Facebook</span>
          </a>
          <a class="button-circle" href="https://github.com/saisyam" target="_blank" rel="noopener">
            <span class="fab fa-github" aria-hidden="true"></span>
            <span class="screen-reader-text">Github</span>
          </a>
          <a class="button-circle" href="https://linkedin.com/in/saisyam" target="_blank" rel="noopener">
            <span class="fab fa-linkedin" aria-hidden="true"></span>
            <span class="screen-reader-text">LinkedIn</span>
          </a>
          <a class="button-circle" href="https://instagram.com/saisyamdampuri" target="_blank" rel="noopener">
            <span class="fab fa-instagram" aria-hidden="true"></span>
            <span class="screen-reader-text">Instagram</span>
          </a>
        </div>
      </div>
    </div>
  </nav>
  <button id="menu-toggle" class="menu-toggle"><span class="screen-reader-text">Menu</span><span class="icon-menu" aria-hidden="true"></span></button>
        </div>
      </div>
    </div>
  </header>
  <div id="content" class="site-content">
    <main id="main" class="site-main inner">
      
<article class="post post-full">
    <header class="post-header">
      <h1 class="post-title">It&#39;s easy to run PostgreSQL inside Docker</h1>
      <div class="post-meta">
        Published on <time class="published"
          datetime="March 30, 2020 ">March 30, 2020</time> |
          
            <a href="https://saisyam.com/categories/databases"
                        rel="category">Databases </a>
          
      </div>
    </header>
    
    <div class="post-content">
        <p><a href="https://www.docker.com/">Docker</a> makes life easy to run most complex software without going through native installation process. I use docker to deliver development builds for the team to work in their local system. In this article we will see how to run <a href="https://www.postgresql.org/">PostgreSQL</a> inside Docker container, connect to the database docker and run SQL scripts.</p>
<h2 id="introduction-to-docker">Introduction to Docker</h2>
<blockquote>
<p>Docker is a set of platform as a service products that uses OS-level virtualization to deliver software in packages called containers. Containers are isolated from one another and bundle their own software, libraries and configuration files; they can communicate with each other through well-defined channels - Wikipedia</p>
</blockquote>
<p>To learn more about Docker there is an excellent tutorial by <a href="https://runnable.com/docker/">runnable</a>. You can find any docker image (a software bundled inside a docker container is called image) from <a href="https://hub.docker.com/search/?type=image">docker hub</a>. The most popular ones are RabbitMQ, Nginx, Apache etc.</p>
<h2 id="why-postgresql-inside-docker">Why PostgreSQL inside Docker</h2>
<p>Our projects are based on client-server and microservices architecture. We extensively use databases like, MySQL, PostgreSQL and MongoDB. We use messaging queues like RabbitMQ and Redis. So we encourage our developers to use dockers instead of installing all the software on their laptops.</p>
<p>In this article we will discuss on how to use PostgreSQL docker. We cover the following points:</p>
<ol>
<li>Running the PostgreSQL docker</li>
<li>Logging into the docker container</li>
<li>Logging into PostgreSQL with <code>psql</code> shell</li>
<li>Copying SQL files to docker and running them</li>
</ol>
<p><strong>Note:</strong> You need to have docker installed on your computer or laptop. For installing Docker community edition refer <a href="https://docs.docker.com/install/">here</a>.</p>





    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
        style="display:block; text-align:center;"
        data-ad-layout="in-article"
        data-ad-format="fluid"
        data-ad-client="ca-pub-0206245742790279"
        data-ad-slot="8377875555"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>





<h2 id="running-the-postgresql-docker">Running the PostgreSQL docker</h2>
<p>Use the following command to run PostgreSQL docker:</p>
<p><code>$ docker run --name postgres-docker -e POSTGRES_PASSWORD=postgres -p 5432:5432 -d postgres</code></p>
<ol>
<li>Pulls the latest Postgres Docker image from Docker Hub.</li>
<li>Sets the POSTGRES_PASSWORD environment variable value to <code>postgres</code>.</li>
<li>Names (&ndash;name) the Docker container to be <code>postgres-docker</code>.</li>
<li>Maps container&rsquo;s internal 5432 port to external 5432 port, so we will be able to enter it from outside.</li>
<li>Run the Docker container in the background (-d).</li>
</ol>
<p><strong>Note:</strong> In case you stopped your docker or restarted your computer or laptop you can restart your docker by its name. To get the list of containers available (both running and stopped) use the following command:</p>
<p><code>$ docker ps -a</code></p>
<p>To start your docker again use the following command:</p>
<p><code>$ docker start &lt;name of the docker&gt;</code></p>
<p>This is especially helpful when starting/stopping database dockers, as we store data (tables and records) in our docker containers.</p>





    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
        style="display:block; text-align:center;"
        data-ad-layout="in-article"
        data-ad-format="fluid"
        data-ad-client="ca-pub-0206245742790279"
        data-ad-slot="8377875555"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>





<h2 id="logging-into-the-docker-container">Logging into the docker container</h2>
<p>You can login into the docker container with <code>docker exec</code> command. Use below command to login as <code>root</code> into the running docker container:</p>
<p><code>$ docker exec -it &lt;name of the docker&gt; bash</code></p>
<p><code>$ root@377ef2b9b13e:/#</code></p>
<p>The name of the docker in our case is, <code>postgres-docker</code>. You will get to the prompt logged in as <code>root</code>.</p>
<h2 id="log-into-postgresql-inside-docker">Log into PostgreSQL inside Docker</h2>
<p>Once you are into the bash shell of the docker you can use <code>psql</code> command to manage your PostgreSQL database. You the following command to manage your database:</p>
<script type="application/javascript" src="https://gist.github.com/saisyam/6e9e54aed3380dc6c6e6fd54bb14b792.js"></script>

<p>We are using the default <code>postgres</code> user. You will get to the prompt to run commands like:</p>
<ol>
<li><code>\l</code> to list the available databases</li>
<li><code>\c &lt;database name&gt;</code> to select the database</li>
</ol>
<p>Run SQL commands like, <code>SELECT</code>, <code>INSERT</code>, <code>DELETE</code>, <code>UPDATE</code> etc. to manipulate your tables and records. Refer to <code>psql</code> documentation <a href="https://www.postgresql.org/docs/10/app-psql.html">here</a>.</p>
<h2 id="copying-sql-files-to-postgresql-inside-docker">Copying SQL files to PostgreSQL inside Docker</h2>
<p>Sometime we will have an existing schema (SQL file) which we need to execute once we have the docker up and running. To do that we need to copy our SQL file into the docker and then run the SQL file.</p>
<p>Copy the SQL file using <code>docker cp</code> command:</p>
<p><code>$ docker cp ./world.sql projectm-postgres:/docker-entrypoint-initdb.d/world.sql</code></p>
<p>Interpret the above command:</p>
<p><code>$ docker cp &lt;sql file&gt; &lt;docker name&gt;:/&lt;path in docker container&gt;/&lt;sql file&gt;</code></p>
<p>We will execute the SQL file using <code>docker exec</code> command:</p>
<p><code>$ docker exec -u postgres projectm-postgres psql world postgres -f docker-entrypoint-initdb.d/world.sql</code></p>
<p>Interpret the above command:</p>
<p><code>$ docker exec -u &lt;postgres user&gt; &lt;docker name&gt; psql &lt;dbname&gt; &lt;postgres user&gt; -f &lt;path to SQL file&gt;</code></p>
<p>The file I uses contains a <code>CREATE TABLE</code> and <code>INSERT TABLE</code> command. So the result says, <code>CREATE TABLE</code> successful and inserted 239 records. The SQL file I used can be downloaded from <a href="https://gist.github.com/saisyam/2859fcc386e7405d1416a67c6c8e859a">here</a></p>





    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
        style="display:block; text-align:center;"
        data-ad-layout="in-article"
        data-ad-format="fluid"
        data-ad-client="ca-pub-0206245742790279"
        data-ad-slot="8377875555"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>





<h2 id="conclusion">Conclusion</h2>
<p>Running databases within Docker provides a lot of flexibility by avoiding the complex installation procedure. Thanks for reading. I will come up with an another article using docker-compose.</p>

    </div>

    <h4>Tags: </h4>
    <nav class="pagination">
      <div class="nav-links">
        
                <a class="button" href="https://saisyam.com/tags/postgres" rel="tag">Postgres</a>
        
                <a class="button" href="https://saisyam.com/tags/docker" rel="tag">Docker</a>
        
      </div>
    </nav>
  </article>

    </main>
    <footer id="colophon" class="site-footer inner">
    <div class="site-footer-inside">
      <span class="copyright">&copy; Saisyam - 2020</span>
        <a href=""></a>
    </div>  
    <a id="to-top" class="to-top" href="#page">To top <span class="icon-arrow-up" aria-hidden="true"></span></a>
  </footer>
  </div>
  
  <script type="text/javascript" src="js/plugins.js"></script>
  <script type="text/javascript" src="js/main.js"></script>
</body>  

</html>
