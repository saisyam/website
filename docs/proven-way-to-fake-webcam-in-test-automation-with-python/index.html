<!doctype html>

<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Saisyam&#39;s personal blog for technical articles" />
  <meta name="author" content="Saisyam" />
  <meta property="og:title" content="Proven way to Fake Webcam in Test Automation with Python" />
<meta property="og:description" content="We automate web application testing using Python Selenium or Splinter. How will you automate testing applications with webcam? You can fake a webcam device with Chrome Web driver. In this article we will see how to do that." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://saisyam.com/proven-way-to-fake-webcam-in-test-automation-with-python/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-06-07T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-06-07T00:00:00+00:00" />

 
  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Proven way to Fake Webcam in Test Automation with Python"/>
<meta name="twitter:description" content="We automate web application testing using Python Selenium or Splinter. How will you automate testing applications with webcam? You can fake a webcam device with Chrome Web driver. In this article we will see how to do that."/>

  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-50423294-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  <title>Saisyam - Personal Blog</title>
  <link href="https://fonts.googleapis.com/css?family=Muli:300,400,700|Playfair+Display:400,700,900" rel="stylesheet">
  <link rel="stylesheet" href="https://saisyam.com/css/magnific-popup.css">
  <link rel="stylesheet" href="https://saisyam.com/css/jquery-ui.css">
  <link rel="stylesheet" href="https://saisyam.com/css/owl.carousel.min.css">
  <link rel="stylesheet" href="https://saisyam.com/css/owl.theme.default.min.css">
  <link rel="stylesheet" href="https://saisyam.com/css/bootstrap-datepicker.css">
  <link rel="stylesheet" href="https://saisyam.com/fonts/flaticon/font/flaticon.css">
  <link rel="stylesheet" href="https://saisyam.com/css/aos.css">
  <link rel="stylesheet" href="https://saisyam.com/css/style.css">
  <link rel="stylesheet" href="https://saisyam.com/css/bootstrap.min.css">
</head>

<body>
    <div class="site-wrap">
        <div class="site-mobile-menu">
            <div class="site-mobile-menu-header">
                <div class="site-mobile-menu-close mt-3">
                    <span class="icon-close2 js-menu-toggle"></span>
                </div>
            </div>
            <div class="site-mobile-menu-body"></div>
        </div>
        
<header class="site-navbar" role="banner">
    <div class="container-fluid">
        <div class="row align-items-center">
            <div class="col-4 site-logo">
                <a href="https://saisyam.com/" class="text-black h2 mb-0">Saisyam</a>
            </div>
            <div class="col-8 text-right">
                <nav class="site-navigation" role="navigation">
                    <ul class="site-menu js-clone-nav mr-auto d-none d-lg-block mb-0">
                        <li><a href="https://saisyam.com/">Home</a></li>
                        
                        <li>
                            <a href="https://saisyam.com/categories/cloud">Cloud</a>
                        </li>
                        
                        <li>
                            <a href="https://saisyam.com/categories/freeswitch">Freeswitch</a>
                        </li>
                        
                        <li>
                            <a href="https://saisyam.com/categories/python">Python</a>
                        </li>
                        
                        <li>
                            <a href="https://saisyam.com/categories/webassembly">Webassembly</a>
                        </li>
                        
                    </ul>
                </nav>
                <a href="#" class="site-menu-toggle js-menu-toggle text-black d-inline-block d-lg-none"><span class="icon-menu h3"></span></a>
            </div>
        </div>
    </div>
</header>
        
    <div class="site-cover site-cover-sm same-height overlay single-page" style="background-image: url('/webcam_testing.jpg');">
  <div class="container">
    <div class="row same-height justify-content-center">
      <div class="col-md-12 col-lg-10">
      <div class="post-entry text-center">
        <span class="post-category text-white bg-success mb-3">Python</span>
        <h1 class="mb-4"><a href="https://saisyam.com/proven-way-to-fake-webcam-in-test-automation-with-python/">Proven way to Fake Webcam in Test Automation with Python</a></h1>
        <div class="post-meta align-items-center text-center">
          <span>Jun 7, 2020</span>
        </div>
      </div>
      </div>
    </div>
  </div>
</div>
<section class="site-section py-lg">
  <div class="container">
    <div class="row blog-entries element-animate">
      <div class="col-md-12 col-lg-8 main-content">
        <div class="post-content-body">
          <p>We automate web application testing using Python Selenium or Splinter. How will you automate testing applications with webcam? You can fake a webcam device with Chrome Web driver. In this article we will see how to do that.</p>
<div id="toc">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#challenge">Challenge</a></li>
    <li><a href="#chrome-settings-to-fake-webcam">Chrome Settings to fake webcam</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav>
</div>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-0206245742790279"
     data-ad-slot="3890452391"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2 id="challenge">Challenge</h2>
<p>The challenge here is to fake the webcam with proper video format. In this post I am using Chrome browser along with <a href="https://splinter.readthedocs.io/en/latest/">Splinter</a>.
If you are new to Splinter, check out my article and I promise you love it. We use Splinter not only for testing but also for web scraping. Chrome need Y4M format to replace the camera feed. To generate that format you need <a href="https://www.ffmpeg.org/">ffmpeg</a> tool. Using that tool you can convert any MP4 video into Y4M format.</p>
<blockquote>
<p>Y4M is an un-compressed format. The converted Y4M file size will be almost three times the MP4 file. So, take a small MP4 file or repeat the image to create the video.</p>
</blockquote>
<p>Once you have the Y4M file you can follow the below mentioned steps to fake the webcam. <a href="https://testrtc.com/y4m-video-chrome/">Here</a> is an article on how to create Y4M files using <a href="https://www.ffmpeg.org/">ffmpeg</a>.</p>
<h2 id="chrome-settings-to-fake-webcam">Chrome Settings to fake webcam</h2>
<p>We will set <code>webdriver.ChromeOptions</code> to enable media stream using a fake device.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>chrome_options <span style="color:#f92672">=</span> webdriver<span style="color:#f92672">.</span>ChromeOptions()
</span></span><span style="display:flex;"><span>chrome_options<span style="color:#f92672">.</span>add_argument(<span style="color:#e6db74">&#34;--use-fake-device-for-media-stream&#34;</span>)
</span></span><span style="display:flex;"><span>chrome_options<span style="color:#f92672">.</span>add_argument(<span style="color:#e6db74">&#34;--use-file-for-fake-video-capture=./salma_hayek.y4m&#34;</span>)
</span></span><span style="display:flex;"><span>chrome_options<span style="color:#f92672">.</span>add_experimental_option(<span style="color:#e6db74">&#34;prefs&#34;</span>, {
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;profile.default_content_setting_values.media_stream_camera&#34;</span>: <span style="color:#ae81ff">1</span>
</span></span></code></pre></div><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-0206245742790279"
     data-ad-slot="3890452391"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2 id="conclusion">Conclusion</h2>
<p>You are all set to test the web applications uing a fake video. The complete source code along with the sample web application (using Python Flask) is available as a <a href="https://gitlab.com/saisyam/web-automation-testing/-/tree/master/fake_webcam">gitlab project</a>.</p>

        </div>
      
      </div>
    </div>
  </div>

</section>
<div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "saisyam-1" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    <script type="application/ld+json">
    
    {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "headline": "Proven way to Fake Webcam in Test Automation with Python",
      "image": "https://saisyam.com/",
      "datePublished": "2020-06-07T00:00:00Z",
      "dateModified": "2020-06-07T00:00:00Z",
      "author": {
        "@type": "Person",
        "name":  null 
      },
      "mainEntityOfPage": { "@type": "WebPage" },
       "publisher": {
        "@type": "Organization",
        "name":  null ,
        "logo": {
          "@type": "ImageObject",
          "url":  null 
        }
      },
      "description": "We automate web application testing using Python Selenium or Splinter. How will you automate testing applications with webcam? You can fake a webcam device with Chrome Web driver. In this article we will see how to do that.",
      "keywords": ["Web Testing", "Splinter", "ffmpeg", "Fake webcam"]
    }
    
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Personal blog",
      "url": "https://saisyam.com/",
      "sameAs": [
        "https://www.facebook.com/saisyam.dampuri.5667",
        "https://www.instagram.com/saisyamdampuri",
        "https://twitter.com/saisyam1",
        "https://github.com/saisyam"
      ]
    }
    </script>

        <div class="site-footer">
  <div class="container">
    <div class="row">
      <div class="col-12 text-center">
        <p>
          Copyright &copy; <script>document.write(new Date().getFullYear());</script> All rights reserved
        </p>
      </div>
    </div>
  </div>
</div>

<script src="https://saisyam.com/js/jquery-3.3.1.min.js"></script>
<script src="https://saisyam.com/js/jquery-migrate-3.0.1.min.js"></script>
<script src="https://saisyam.com/js/jquery-ui.js"></script>
<script src="https://saisyam.com/js/popper.min.js"></script>
<script src="https://saisyam.com/js/bootstrap.min.js"></script>
<script src="https://saisyam.com/js/owl.carousel.min.js"></script>
<script src="https://saisyam.com/js/jquery.stellar.min.js"></script>
<script src="https://saisyam.com/js/jquery.countdown.min.js"></script>
<script src="https://saisyam.com/js/jquery.magnific-popup.min.js"></script>
<script src="https://saisyam.com/js/bootstrap-datepicker.min.js"></script>
<script src="https://saisyam.com/js/aos.js"></script>
<script src="https://saisyam.com/js/main.js"></script>


  
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-50423294-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



    </div>
</body>
</html>

